{"ast":null,"code":"export default {\n  name: 'MemoryManagement',\n  data() {\n    return {\n      totalMemory: 1024,\n      // 总内存大小（MB）\n      usedMemory: 0,\n      freeMemory: 1024,\n      blockSize: 4,\n      // 每个块的大小（MB）\n      memoryRows: [],\n      blocksPerRow: 16\n    };\n  },\n  computed: {\n    memoryUsagePercentage() {\n      return Math.round(this.usedMemory / this.totalMemory * 100);\n    },\n    memoryUsageColor() {\n      const percentage = this.memoryUsagePercentage;\n      if (percentage < 60) return '#67C23A';\n      if (percentage < 80) return '#E6A23C';\n      return '#F56C6C';\n    }\n  },\n  created() {\n    this.initializeMemory();\n  },\n  methods: {\n    initializeMemory() {\n      const totalBlocks = Math.ceil(this.totalMemory / this.blockSize);\n      const rows = Math.ceil(totalBlocks / this.blocksPerRow);\n      this.memoryRows = Array(rows).fill().map(() => Array(this.blocksPerRow).fill().map(() => ({\n        status: 'FREE',\n        processId: null,\n        size: this.blockSize\n      })));\n    },\n    getBlockTooltip(block) {\n      if (block.status === 'ALLOCATED') {\n        return `进程ID: ${block.processId}\\n大小: ${block.size}MB`;\n      }\n      return '空闲块';\n    },\n    allocateMemory(processId, size) {\n      const blocksNeeded = Math.ceil(size / this.blockSize);\n      let allocatedBlocks = 0;\n      for (let row of this.memoryRows) {\n        for (let block of row) {\n          if (block.status === 'FREE') {\n            block.status = 'ALLOCATED';\n            block.processId = processId;\n            allocatedBlocks++;\n            if (allocatedBlocks === blocksNeeded) {\n              this.usedMemory += size;\n              this.freeMemory -= size;\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    },\n    freeMemory(processId) {\n      let freedSize = 0;\n      for (let row of this.memoryRows) {\n        for (let block of row) {\n          if (block.status === 'ALLOCATED' && block.processId === processId) {\n            block.status = 'FREE';\n            block.processId = null;\n            freedSize += block.size;\n          }\n        }\n      }\n      this.usedMemory -= freedSize;\n      this.freeMemory += freedSize;\n    }\n  }\n};","map":{"version":3,"names":["name","data","totalMemory","usedMemory","freeMemory","blockSize","memoryRows","blocksPerRow","computed","memoryUsagePercentage","Math","round","memoryUsageColor","percentage","created","initializeMemory","methods","totalBlocks","ceil","rows","Array","fill","map","status","processId","size","getBlockTooltip","block","allocateMemory","blocksNeeded","allocatedBlocks","row","freedSize"],"sources":["src/components/MemoryManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"memory-management\">\r\n    <h2>内存管理</h2>\r\n    <div class=\"memory-info\">\r\n      <div class=\"info-item\">总内存: {{ totalMemory }}MB</div>\r\n      <div class=\"info-item\">已用内存: {{ usedMemory }}MB</div>\r\n      <div class=\"info-item\">空闲内存: {{ freeMemory }}MB</div>\r\n      <div class=\"memory-usage\">\r\n        <div class=\"usage-label\">内存利用率: {{ memoryUsagePercentage }}%</div>\r\n        <el-progress \r\n          :percentage=\"memoryUsagePercentage\"\r\n          :color=\"memoryUsageColor\"\r\n          :stroke-width=\"15\"\r\n          :show-text=\"false\"\r\n        ></el-progress>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"memory-blocks\">\r\n      <div v-for=\"(row, rowIndex) in memoryRows\" :key=\"rowIndex\" class=\"memory-row\">\r\n        <div\r\n          v-for=\"(block, blockIndex) in row\"\r\n          :key=\"blockIndex\"\r\n          class=\"memory-block\"\r\n          :class=\"{\r\n            'allocated': block.status === 'ALLOCATED',\r\n            'free': block.status === 'FREE'\r\n          }\"\r\n          :title=\"getBlockTooltip(block)\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MemoryManagement',\r\n  data() {\r\n    return {\r\n      totalMemory: 1024, // 总内存大小（MB）\r\n      usedMemory: 0,\r\n      freeMemory: 1024,\r\n      blockSize: 4, // 每个块的大小（MB）\r\n      memoryRows: [],\r\n      blocksPerRow: 16\r\n    }\r\n  },\r\n  computed: {\r\n    memoryUsagePercentage() {\r\n      return Math.round((this.usedMemory / this.totalMemory) * 100)\r\n    },\r\n    memoryUsageColor() {\r\n      const percentage = this.memoryUsagePercentage\r\n      if (percentage < 60) return '#67C23A'\r\n      if (percentage < 80) return '#E6A23C'\r\n      return '#F56C6C'\r\n    }\r\n  },\r\n  created() {\r\n    this.initializeMemory()\r\n  },\r\n  methods: {\r\n    initializeMemory() {\r\n      const totalBlocks = Math.ceil(this.totalMemory / this.blockSize)\r\n      const rows = Math.ceil(totalBlocks / this.blocksPerRow)\r\n      \r\n      this.memoryRows = Array(rows).fill().map(() => \r\n        Array(this.blocksPerRow).fill().map(() => ({\r\n          status: 'FREE',\r\n          processId: null,\r\n          size: this.blockSize\r\n        }))\r\n      )\r\n    },\r\n    getBlockTooltip(block) {\r\n      if (block.status === 'ALLOCATED') {\r\n        return `进程ID: ${block.processId}\\n大小: ${block.size}MB`\r\n      }\r\n      return '空闲块'\r\n    },\r\n    allocateMemory(processId, size) {\r\n      const blocksNeeded = Math.ceil(size / this.blockSize)\r\n      let allocatedBlocks = 0\r\n      \r\n      for (let row of this.memoryRows) {\r\n        for (let block of row) {\r\n          if (block.status === 'FREE') {\r\n            block.status = 'ALLOCATED'\r\n            block.processId = processId\r\n            allocatedBlocks++\r\n            \r\n            if (allocatedBlocks === blocksNeeded) {\r\n              this.usedMemory += size\r\n              this.freeMemory -= size\r\n              return true\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return false\r\n    },\r\n    freeMemory(processId) {\r\n      let freedSize = 0\r\n      \r\n      for (let row of this.memoryRows) {\r\n        for (let block of row) {\r\n          if (block.status === 'ALLOCATED' && block.processId === processId) {\r\n            block.status = 'FREE'\r\n            block.processId = null\r\n            freedSize += block.size\r\n          }\r\n        }\r\n      }\r\n      \r\n      this.usedMemory -= freedSize\r\n      this.freeMemory += freedSize\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.memory-management {\r\n  padding: 20px;\r\n}\r\n\r\n.memory-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n  flex-wrap: nowrap;\r\n}\r\n\r\n.info-item {\r\n  white-space: nowrap;\r\n}\r\n\r\n.memory-blocks {\r\n  border: 1px solid #dcdfe6;\r\n  padding: 10px;\r\n  background-color: #f5f7fa;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.memory-row {\r\n  display: flex;\r\n  gap: 2px;\r\n  margin-bottom: 2px;\r\n  justify-content: center;\r\n}\r\n\r\n.memory-block {\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 1px solid #dcdfe6;\r\n  cursor: pointer;\r\n}\r\n\r\n.memory-block.allocated {\r\n  background-color: #409eff;\r\n}\r\n\r\n.memory-block.free {\r\n  background-color: #f0f9eb;\r\n}\r\n\r\n.memory-usage {\r\n  flex: 1;\r\n  min-width: 200px;\r\n  margin-left: 20px;\r\n}\r\n\r\n.usage-label {\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  white-space: nowrap;\r\n}\r\n</style> "],"mappings":"AAoCA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;MAAA;MACAC,UAAA;MACAC,UAAA;MACAC,SAAA;MAAA;MACAC,UAAA;MACAC,YAAA;IACA;EACA;EACAC,QAAA;IACAC,sBAAA;MACA,OAAAC,IAAA,CAAAC,KAAA,MAAAR,UAAA,QAAAD,WAAA;IACA;IACAU,iBAAA;MACA,MAAAC,UAAA,QAAAJ,qBAAA;MACA,IAAAI,UAAA;MACA,IAAAA,UAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA;IACAD,iBAAA;MACA,MAAAE,WAAA,GAAAP,IAAA,CAAAQ,IAAA,MAAAhB,WAAA,QAAAG,SAAA;MACA,MAAAc,IAAA,GAAAT,IAAA,CAAAQ,IAAA,CAAAD,WAAA,QAAAV,YAAA;MAEA,KAAAD,UAAA,GAAAc,KAAA,CAAAD,IAAA,EAAAE,IAAA,GAAAC,GAAA,OACAF,KAAA,MAAAb,YAAA,EAAAc,IAAA,GAAAC,GAAA;QACAC,MAAA;QACAC,SAAA;QACAC,IAAA,OAAApB;MACA,GACA;IACA;IACAqB,gBAAAC,KAAA;MACA,IAAAA,KAAA,CAAAJ,MAAA;QACA,gBAAAI,KAAA,CAAAH,SAAA,SAAAG,KAAA,CAAAF,IAAA;MACA;MACA;IACA;IACAG,eAAAJ,SAAA,EAAAC,IAAA;MACA,MAAAI,YAAA,GAAAnB,IAAA,CAAAQ,IAAA,CAAAO,IAAA,QAAApB,SAAA;MACA,IAAAyB,eAAA;MAEA,SAAAC,GAAA,SAAAzB,UAAA;QACA,SAAAqB,KAAA,IAAAI,GAAA;UACA,IAAAJ,KAAA,CAAAJ,MAAA;YACAI,KAAA,CAAAJ,MAAA;YACAI,KAAA,CAAAH,SAAA,GAAAA,SAAA;YACAM,eAAA;YAEA,IAAAA,eAAA,KAAAD,YAAA;cACA,KAAA1B,UAAA,IAAAsB,IAAA;cACA,KAAArB,UAAA,IAAAqB,IAAA;cACA;YACA;UACA;QACA;MACA;MACA;IACA;IACArB,WAAAoB,SAAA;MACA,IAAAQ,SAAA;MAEA,SAAAD,GAAA,SAAAzB,UAAA;QACA,SAAAqB,KAAA,IAAAI,GAAA;UACA,IAAAJ,KAAA,CAAAJ,MAAA,oBAAAI,KAAA,CAAAH,SAAA,KAAAA,SAAA;YACAG,KAAA,CAAAJ,MAAA;YACAI,KAAA,CAAAH,SAAA;YACAQ,SAAA,IAAAL,KAAA,CAAAF,IAAA;UACA;QACA;MACA;MAEA,KAAAtB,UAAA,IAAA6B,SAAA;MACA,KAAA5B,UAAA,IAAA4B,SAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}